#N canvas -8 -8 1366 685 10;
#X obj 662 377 tgl 25 0 empty empty empty 17 7 0 25 -262144 -1 -1 1
1;
#N canvas 2112 272 813 514 set 1;
#X obj 314 83 inlet;
#X obj 314 205 realtime;
#X obj 314 109 t b b;
#X obj 153 201 +;
#X obj 126 200 f;
#X msg 153 159 1;
#X obj 359 178 spigot;
#X obj 126 285 > 1;
#X obj 618 330 sel 1;
#X msg 126 159 0;
#X obj 642 195 metro 1;
#X obj 642 251 +;
#X obj 618 251 f;
#X msg 642 215 1;
#X msg 614 215 0;
#X obj 172 255 sel 1;
#X obj 642 170 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 314 350 +;
#X obj 288 350 f;
#X obj 618 282 spigot;
#X obj 288 402 /;
#X obj 199 361 - 1;
#X obj 315 485 outlet;
#X obj 275 86 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X floatatom 341 463 12 0 0 0 - - -;
#X obj 126 306 s TAP_not_first;
#X obj 392 156 r TAP_not_first;
#X obj 671 253 r TAP_not_first;
#X obj 172 277 s TAP_start;
#X obj 642 148 r TAP_start;
#X obj 288 439 sel 0;
#X obj 618 311 > 3000;
#X obj 618 351 s TAP_finish;
#X obj 614 125 r TAP_finish;
#X obj 126 136 r TAP_finish;
#X msg 288 329 0;
#X obj 288 306 r TAP_finish;
#X text 500 24 A timer gets triggered and reset every time;
#X text 499 38 the inlet receives a bang. If nothing happens;
#X text 498 53 afterwards for 3000 ms \, the "tempo" is considered
;
#X text 498 68 definitive \, and everything gets reset.;
#X text 498 90 comment;
#X text 12 189 Count the number;
#X text 12 201 of bangs received.;
#X text 385 199 Measure the time between;
#X text 385 212 two bangs (making sure that;
#X text 386 223 we only start measuring at;
#X text 386 235 the second bang).;
#X text 358 342 Sum the measured durations...;
#X text 336 403 ... and divide it by the number of bangs-1;
#X text 336 417 to get the average time between 2 bangs.;
#X text 558 490 Pierre Massat \, Guitar Extended \, 2013;
#X text 6 2 "Tap tempo" : we don't measure the tempo;
#X text 5 16 here \, but the duration between 2 beats (bangs).;
#X text 5 30 This is used later to set the length of the loop.;
#X connect 0 0 2 0;
#X connect 1 0 17 0;
#X connect 2 0 1 0;
#X connect 2 1 5 0;
#X connect 2 1 6 0;
#X connect 2 1 14 0;
#X connect 3 0 4 0;
#X connect 4 0 3 1;
#X connect 4 0 7 0;
#X connect 4 0 21 0;
#X connect 4 0 15 0;
#X connect 5 0 3 0;
#X connect 6 0 1 1;
#X connect 7 0 25 0;
#X connect 8 0 32 0;
#X connect 9 0 4 0;
#X connect 10 0 13 0;
#X connect 11 0 12 0;
#X connect 12 0 11 1;
#X connect 12 0 19 0;
#X connect 13 0 11 0;
#X connect 14 0 12 0;
#X connect 15 0 28 0;
#X connect 16 0 10 0;
#X connect 17 0 18 0;
#X connect 18 0 17 1;
#X connect 18 0 20 0;
#X connect 19 0 31 0;
#X connect 20 0 30 0;
#X connect 21 0 20 1;
#X connect 23 0 2 0;
#X connect 26 0 6 1;
#X connect 27 0 19 1;
#X connect 29 0 16 0;
#X connect 30 1 22 0;
#X connect 30 1 24 0;
#X connect 31 0 8 0;
#X connect 33 0 16 0;
#X connect 34 0 9 0;
#X connect 35 0 18 0;
#X connect 36 0 35 0;
#X restore 962 403 pd set tempo;
#X obj 962 371 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 562 568 r~ main_out;
#X obj 562 599 +~;
#X obj 576 530 *~;
#X obj 664 513 line~;
#X obj 663 478 pack 0 5;
#X obj 964 630 r loop_on_off;
#N canvas -9 -9 1370 729 into_blocks 0;
#X obj 173 101 % 64;
#X obj 146 81 t f f;
#X obj 146 121 -;
#X obj 146 59 int;
#X obj 146 17 inlet;
#X obj 146 167 outlet;
#X text 238 67 to be a multiple of the block size.;
#X text 238 49 Force the length of the tables;
#X text 134 261 Pierre Massat \, Guitar extended \, 2013;
#X connect 0 0 2 1;
#X connect 1 0 2 0;
#X connect 1 1 0 0;
#X connect 2 0 5 0;
#X connect 3 0 1 0;
#X connect 4 0 3 0;
#X restore 960 480 pd into_blocks;
#X obj 956 515 s new_length;
#X obj 1138 494 r new_length;
#X obj 1138 564 r empty_table;
#X obj 630 618 r stop_looping;
#X obj 649 639 r new_cycle;
#X obj 562 660 tabwrite~ bande;
#X obj 1138 636 table bande;
#X obj 1109 372 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 964 650 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X text 546 694 This is where the recording happens.;
#X text 813 393 Get the duration between;
#X text 813 405 two beats...;
#X text 814 437 ... divide it by 4 (we;
#X text 814 450 assume that there are 4;
#X text 814 462 beats in a bar)...;
#X text 793 563 block size.;
#X text 793 551 a multiple of the;
#X obj 1281 358 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1
1 1;
#X obj 163 534 dac~;
#X msg 933 630 1;
#X text 1250 325 Audio On/Off;
#X text 1099 328 Clear;
#X obj 933 606 r new_length;
#X obj 565 870 soundfiler;
#X obj 565 830 savepanel;
#X obj 565 812 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X msg 565 850 write -wave \$1.wav bande;
#X text 531 774 And if you really happy with your loop \,;
#X text 531 788 save it as a .wav file !;
#X msg 1138 586 \; bande const 0 \;;
#X msg 1138 514 \; bande resize \$1 \;;
#X obj 154 493 *~;
#X obj 225 477 line~;
#X obj 178 449 pack 0 5;
#X obj 833 704 r~ main_out;
#X obj 215 420 r vol-output;
#X obj 662 297 key;
#X obj 662 339 sel 49;
#N canvas -103 92 1370 729 sound_trigger_1 0;
#X obj 352 105 inlet;
#X obj 352 187 trigger b b;
#X msg 304 233 stop;
#X msg 352 234 start;
#X obj 352 140 sel 100;
#X obj 352 302 outlet;
#X msg 414 285 open C.wav;
#X connect 0 0 4 0;
#X connect 1 0 3 0;
#X connect 1 1 6 0;
#X connect 2 0 5 0;
#X connect 3 0 5 0;
#X connect 4 0 1 0;
#X connect 6 0 5 0;
#X restore 477 473 pd sound_trigger_1;
#X obj 477 437 key;
#X obj 477 511 readsf~ 2;
#X obj 479 547 dac~;
#N canvas 676 0 681 676 loop_function 0;
#X obj 117 38 inlet;
#X obj 1063 821 spigot;
#X obj 984 725 sel 1 0;
#X msg 984 758 bang;
#X msg 1018 757 stop;
#X obj 982 837 s~ main_out;
#X obj 984 705 t f f;
#X obj 1083 800 s stop_looping;
#X obj 1063 850 s new_cycle;
#X obj 976 795 tabplay~ bande;
#X text 1066 745 Here we play the table (loop) continuously.;
#X obj 1073 831 spigot;
#X obj 994 735 sel 1 0;
#X msg 994 768 bang;
#X msg 1028 767 stop;
#X obj 992 847 s~ main_out;
#X obj 994 715 t f f;
#X obj 1093 810 s stop_looping;
#X obj 1073 860 s new_cycle;
#X obj 986 805 tabplay~ bande;
#X text 1076 755 Here we play the table (loop) continuously.;
#X obj 1083 841 spigot;
#X obj 1004 745 sel 1 0;
#X msg 1004 778 bang;
#X msg 1038 777 stop;
#X obj 1002 857 s~ main_out;
#X obj 1004 725 t f f;
#X obj 1103 820 s stop_looping;
#X obj 1083 870 s new_cycle;
#X obj 996 815 tabplay~ bande;
#X text 1086 765 Here we play the table (loop) continuously.;
#X obj 1093 851 spigot;
#X obj 1014 755 sel 1 0;
#X msg 1014 788 bang;
#X msg 1048 787 stop;
#X obj 1012 867 s~ main_out;
#X obj 1014 735 t f f;
#X obj 1113 830 s stop_looping;
#X obj 1093 880 s new_cycle;
#X obj 1006 825 tabplay~ bande;
#X text 1096 775 Here we play the table (loop) continuously.;
#X obj 1103 861 spigot;
#X obj 1024 765 sel 1 0;
#X msg 1024 798 bang;
#X msg 1058 797 stop;
#X obj 1022 877 s~ main_out;
#X obj 1024 745 t f f;
#X obj 1123 840 s stop_looping;
#X obj 1103 890 s new_cycle;
#X obj 1016 835 tabplay~ bande;
#X text 1106 785 Here we play the table (loop) continuously.;
#X obj 1113 871 spigot;
#X obj 1034 775 sel 1 0;
#X msg 1034 808 bang;
#X msg 1068 807 stop;
#X obj 1032 887 s~ main_out;
#X obj 1034 755 t f f;
#X obj 1133 850 s stop_looping;
#X obj 1113 900 s new_cycle;
#X obj 1026 845 tabplay~ bande;
#X text 1116 795 Here we play the table (loop) continuously.;
#X obj 1123 881 spigot;
#X obj 1044 785 sel 1 0;
#X msg 1044 818 bang;
#X msg 1078 817 stop;
#X obj 1042 897 s~ main_out;
#X obj 1044 765 t f f;
#X obj 1143 860 s stop_looping;
#X obj 1123 910 s new_cycle;
#X obj 1036 855 tabplay~ bande;
#X text 1126 805 Here we play the table (loop) continuously.;
#X obj 1133 891 spigot;
#X obj 1054 795 sel 1 0;
#X msg 1054 828 bang;
#X msg 1088 827 stop;
#X obj 1052 907 s~ main_out;
#X obj 1054 775 t f f;
#X obj 1153 870 s stop_looping;
#X obj 1133 920 s new_cycle;
#X obj 1046 865 tabplay~ bande;
#X text 1136 815 Here we play the table (loop) continuously.;
#X obj 1143 901 spigot;
#X obj 1064 805 sel 1 0;
#X msg 1064 838 bang;
#X msg 1098 837 stop;
#X obj 1062 917 s~ main_out;
#X obj 1064 785 t f f;
#X obj 1163 880 s stop_looping;
#X obj 1143 930 s new_cycle;
#X obj 1056 875 tabplay~ bande;
#X text 1146 825 Here we play the table (loop) continuously.;
#X obj 1153 911 spigot;
#X obj 1074 815 sel 1 0;
#X msg 1074 848 bang;
#X msg 1108 847 stop;
#X obj 1072 927 s~ main_out;
#X obj 1074 795 t f f;
#X obj 1173 890 s stop_looping;
#X obj 1153 940 s new_cycle;
#X obj 1066 885 tabplay~ bande;
#X text 1156 835 Here we play the table (loop) continuously.;
#X obj 1163 921 spigot;
#X obj 1084 825 sel 1 0;
#X msg 1084 858 bang;
#X msg 1118 857 stop;
#X obj 1082 937 s~ main_out;
#X obj 1084 805 t f f;
#X obj 1183 900 s stop_looping;
#X obj 1163 950 s new_cycle;
#X obj 1076 895 tabplay~ bande;
#X text 1166 845 Here we play the table (loop) continuously.;
#X obj 138 99 t f f;
#X obj 150 152 sel 1 0;
#X obj 79 248 tabplay~ bande;
#X obj 208 298 s stop_looping;
#X obj 135 346 spigot;
#X obj 193 393 s new_cycle;
#X obj 73 401 s~ main_out;
#X msg 86 189 bang;
#X msg 184 191 stop;
#X connect 0 0 111 0;
#X connect 1 0 8 0;
#X connect 1 0 9 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 3 0 8 0;
#X connect 3 0 9 0;
#X connect 4 0 7 0;
#X connect 4 0 9 0;
#X connect 6 0 2 0;
#X connect 6 1 1 1;
#X connect 9 0 5 0;
#X connect 9 1 1 0;
#X connect 11 0 18 0;
#X connect 11 0 19 0;
#X connect 12 0 13 0;
#X connect 12 1 14 0;
#X connect 13 0 18 0;
#X connect 13 0 19 0;
#X connect 14 0 17 0;
#X connect 14 0 19 0;
#X connect 16 0 12 0;
#X connect 16 1 11 1;
#X connect 19 0 15 0;
#X connect 19 1 11 0;
#X connect 21 0 28 0;
#X connect 21 0 29 0;
#X connect 22 0 23 0;
#X connect 22 1 24 0;
#X connect 23 0 28 0;
#X connect 23 0 29 0;
#X connect 24 0 27 0;
#X connect 24 0 29 0;
#X connect 26 0 22 0;
#X connect 26 1 21 1;
#X connect 29 0 25 0;
#X connect 29 1 21 0;
#X connect 31 0 38 0;
#X connect 31 0 39 0;
#X connect 32 0 33 0;
#X connect 32 1 34 0;
#X connect 33 0 38 0;
#X connect 33 0 39 0;
#X connect 34 0 37 0;
#X connect 34 0 39 0;
#X connect 36 0 32 0;
#X connect 36 1 31 1;
#X connect 39 0 35 0;
#X connect 39 1 31 0;
#X connect 41 0 48 0;
#X connect 41 0 49 0;
#X connect 42 0 43 0;
#X connect 42 1 44 0;
#X connect 43 0 48 0;
#X connect 43 0 49 0;
#X connect 44 0 47 0;
#X connect 44 0 49 0;
#X connect 46 0 42 0;
#X connect 46 1 41 1;
#X connect 49 0 45 0;
#X connect 49 1 41 0;
#X connect 51 0 58 0;
#X connect 51 0 59 0;
#X connect 52 0 53 0;
#X connect 52 1 54 0;
#X connect 53 0 58 0;
#X connect 53 0 59 0;
#X connect 54 0 57 0;
#X connect 54 0 59 0;
#X connect 56 0 52 0;
#X connect 56 1 51 1;
#X connect 59 0 55 0;
#X connect 59 1 51 0;
#X connect 61 0 68 0;
#X connect 61 0 69 0;
#X connect 62 0 63 0;
#X connect 62 1 64 0;
#X connect 63 0 68 0;
#X connect 63 0 69 0;
#X connect 64 0 67 0;
#X connect 64 0 69 0;
#X connect 66 0 62 0;
#X connect 66 1 61 1;
#X connect 69 0 65 0;
#X connect 69 1 61 0;
#X connect 71 0 78 0;
#X connect 71 0 79 0;
#X connect 72 0 73 0;
#X connect 72 1 74 0;
#X connect 73 0 78 0;
#X connect 73 0 79 0;
#X connect 74 0 77 0;
#X connect 74 0 79 0;
#X connect 76 0 72 0;
#X connect 76 1 71 1;
#X connect 79 0 75 0;
#X connect 79 1 71 0;
#X connect 81 0 88 0;
#X connect 81 0 89 0;
#X connect 82 0 83 0;
#X connect 82 1 84 0;
#X connect 83 0 88 0;
#X connect 83 0 89 0;
#X connect 84 0 87 0;
#X connect 84 0 89 0;
#X connect 86 0 82 0;
#X connect 86 1 81 1;
#X connect 89 0 85 0;
#X connect 89 1 81 0;
#X connect 91 0 98 0;
#X connect 91 0 99 0;
#X connect 92 0 93 0;
#X connect 92 1 94 0;
#X connect 93 0 98 0;
#X connect 93 0 99 0;
#X connect 94 0 97 0;
#X connect 94 0 99 0;
#X connect 96 0 92 0;
#X connect 96 1 91 1;
#X connect 99 0 95 0;
#X connect 99 1 91 0;
#X connect 101 0 108 0;
#X connect 101 0 109 0;
#X connect 102 0 103 0;
#X connect 102 1 104 0;
#X connect 103 0 108 0;
#X connect 103 0 109 0;
#X connect 104 0 107 0;
#X connect 104 0 109 0;
#X connect 106 0 102 0;
#X connect 106 1 101 1;
#X connect 109 0 105 0;
#X connect 109 1 101 0;
#X connect 111 0 112 0;
#X connect 111 1 115 1;
#X connect 112 0 118 0;
#X connect 112 1 119 0;
#X connect 113 0 117 0;
#X connect 113 1 115 0;
#X connect 115 0 116 0;
#X connect 115 0 113 0;
#X connect 118 0 113 0;
#X connect 118 0 116 0;
#X connect 119 0 113 0;
#X connect 119 0 114 0;
#X restore 986 690 pd loop_function;
#X obj 319 366 spigot;
#X obj 240 270 sel 1 0;
#X msg 240 303 bang;
#X msg 274 302 stop;
#X obj 238 382 s~ main_out;
#X obj 240 250 t f f;
#X obj 361 339 s stop_looping;
#X obj 319 395 s new_cycle;
#X obj 198 341 tabplay~ bande;
#X text 322 290 Here we play the table (loop) continuously.;
#N canvas 539 0 450 300 main_out_function 0;
#X obj 37 37 inlet~;
#X obj 46 162 *~;
#X obj 93 59 r vol-output;
#X obj 83 103 pack 0 5;
#X obj 78 130 line~;
#X obj 67 221 dac~;
#X connect 0 0 1 0;
#X connect 1 0 5 0;
#X connect 1 0 5 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 1 1;
#X restore 842 746 pd main_out_function;
#N canvas 0 50 450 300 compute_length_samples 0;
#X obj 247 109 * 4;
#X obj 231 153 / 1000;
#X obj 231 179 t f b;
#X obj 224 204 *;
#X obj 262 212 samplerate~;
#X obj 236 259 outlet;
#X obj 241 64 inlet;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 1 4 0;
#X connect 3 0 5 0;
#X connect 6 0 0 0;
#X restore 961 447 pd compute_length_samples;
#X obj 214 673 *;
#X obj 262 669 samplerate~;
#X obj 214 649 t f b;
#X obj 214 583 * 4;
#X obj 214 627 / 1000;
#X text 44 640 ...and compute the length;
#X text 44 654 of the table in samples \, as;
#N canvas 0 50 450 300 clear_all 0;
#X obj 37 37 inlet;
#X obj 50 82 t b b;
#X obj 47 128 del 2;
#X obj 48 177 s empty_table;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 2 0 3 0;
#X restore 1073 405 pd clear_all;
#X obj 174 773 s empty_table;
#X obj 174 717 t b b;
#X obj 174 740 del 2;
#N canvas 0 50 450 300 audio_on_off 0;
#X obj 170 57 inlet;
#X obj 236 166 switch~;
#X obj 163 98 t f f;
#X obj 163 121 s loop_on_off;
#X obj 132 160 s vol-output;
#X connect 0 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 4 0;
#X connect 2 1 1 0;
#X restore 1249 409 pd audio_on_off;
#X obj 318 734 t f f;
#X obj 318 778 s loop_on_off;
#X obj 345 759 switch~;
#X obj 294 800 s vol-output;
#X connect 0 0 7 0;
#X connect 1 0 64 0;
#X connect 2 0 1 0;
#X connect 3 0 4 0;
#X connect 4 0 15 0;
#X connect 5 0 4 1;
#X connect 6 0 5 1;
#X connect 7 0 6 0;
#X connect 8 0 18 0;
#X connect 9 0 10 0;
#X connect 11 0 40 0;
#X connect 12 0 39 0;
#X connect 13 0 15 0;
#X connect 14 0 15 0;
#X connect 17 0 72 0;
#X connect 18 0 52 0;
#X connect 27 0 76 0;
#X connect 29 0 18 0;
#X connect 32 0 29 0;
#X connect 34 0 36 0;
#X connect 35 0 34 0;
#X connect 36 0 33 0;
#X connect 41 0 28 0;
#X connect 41 0 28 1;
#X connect 42 0 41 1;
#X connect 43 0 42 0;
#X connect 44 0 63 0;
#X connect 45 0 43 0;
#X connect 46 0 47 0;
#X connect 47 0 0 0;
#X connect 47 0 27 0;
#X connect 48 0 50 0;
#X connect 49 0 48 0;
#X connect 50 0 5 0;
#X connect 50 0 51 0;
#X connect 50 1 5 0;
#X connect 50 1 51 1;
#X connect 53 0 60 0;
#X connect 53 0 61 0;
#X connect 54 0 55 0;
#X connect 54 1 56 0;
#X connect 55 0 60 0;
#X connect 55 0 61 0;
#X connect 56 0 59 0;
#X connect 56 0 61 0;
#X connect 58 0 54 0;
#X connect 58 1 53 1;
#X connect 61 0 57 0;
#X connect 61 1 53 0;
#X connect 64 0 9 0;
#X connect 66 0 65 1;
#X connect 67 0 65 0;
#X connect 67 1 66 0;
#X connect 68 0 69 0;
#X connect 69 0 67 0;
#X connect 74 0 75 0;
#X connect 74 1 73 0;
#X connect 75 0 73 0;
#X connect 77 0 78 0;
#X connect 77 0 80 0;
#X connect 77 1 79 0;
